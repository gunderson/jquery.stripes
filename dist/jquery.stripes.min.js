/*! jQuery Stripes - v0.3.0 - 2013-01-11
* https://github.com/patrickgunderson/jquery.stripes
* Copyright (c) 2013 Patrick Gunderson; Licensed MIT */
(function(e){e.fn.stripes=function(t){this.is("img")&&this.attr("src",e.stripes(t))},e.stripes=function(t){function f(e,t){if(!e)return;a.fillStyle=t,a.beginPath(),a.moveTo(e[0].x,e[0].y),a.lineTo(e[1].x,e[1].y),a.lineTo(e[2].x,e[2].y),a.lineTo(e[3].x,e[3].y),a.closePath(),a.fill()}function l(e,t,n){var i=Math.cos(e),s=Math.sin(e),o=r-e,u=Math.cos(-o),a=Math.sin(-o),f=u*n,l=a*n,c=u*t,h=a*t,p=Math.sin(r)*(t+n)/s,d=s*p/Math.sin(o),v=Math.sqrt(p*p+d*d),m={x:0,y:0},g={x:Math.ceil(i*v),y:Math.ceil(s*v)},y={x:g.x+c,y:g.y+h},b={x:c,y:h};return[m,b,y,g]}function c(t,n,r){var i=[];return e.each(t,function(e,t){i[e]={x:t.x+n,y:t.y+r}}),i}var n=Math.PI*2,r=Math.PI*.5,i={lineWidth:10,separation:5,angle:.15*Math.PI,foregroundColor:"#000",backgroundColor:null,degrees:!0};e.extend(this,i),e.extend(this,t),this.degrees&&(this.angle=Math.PI*this.angle/180),this.angle%=n,this.angle<0?this.angle+=Math.PI:this.angle>Math.PI&&(this.angle-=Math.PI);var s,o;this.angle!==0&&this.angle!==r?(s=l(this.angle,this.lineWidth,this.separation),s[3].x>0&&s[3].y>0?(this.width=s[3].x,this.height=s[3].y,o=c(s,-this.width/2,Math.floor(this.height/2))):s[3].x<0&&s[3].y>0&&(this.width=-s[3].x,this.height=s[3].y,s=c(s,this.width,0),o=c(s,-this.width/2,Math.floor(-this.height/2)))):this.angle===0?(this.width=1,this.height=this.lineWidth+this.separation,s=[{x:0,y:0},{x:1,y:0},{x:1,y:this.lineWidth},{x:0,y:this.lineWidth}]):this.angle===r&&(this.height=1,this.width=this.lineWidth+this.separation,s=[{x:0,y:0},{x:this.lineWidth,y:0},{x:this.lineWidth,y:1},{x:0,y:1}]);var u=e("<canvas>");u[0].width=this.width,u[0].height=this.height;var a=u[0].getContext("2d");return this.backgroundColor&&(a.fillStyle=this.backgroundColor,a.fillRect(0,0,this.width,this.height)),f(s,this.foregroundColor),f(o,this.foregroundColor),u[0].toDataURL()}})(jQuery);